schemaVersion: 2.2.0
metadata:
  name: java-test-reproduction
  version: 1.0.0
components:
  - name: java-dev
    container:
      image: registry.redhat.io/ubi8/openjdk-11:latest
      memoryLimit: 2Gi
      mountSources: true
      endpoints:
        - name: debug
          targetPort: 5005
commands:
  - id: build-gradle
    exec:
      component: java-dev
      workingDir: ${PROJECT_SOURCE}
      commandLine: './gradlew build'
  - id: build-maven
    exec:
      component: java-dev
      workingDir: ${PROJECT_SOURCE}
      commandLine: 'mvn clean compile test-compile'
  - id: test-gradle
    exec:
      component: java-dev
      workingDir: ${PROJECT_SOURCE}
      commandLine: './gradlew test'
  - id: test-maven
    exec:
      component: java-dev
      workingDir: ${PROJECT_SOURCE}
      commandLine: 'mvn test'
